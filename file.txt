docker build -t ghcr.io/aleksandrvakarin/docker-next:latest .

#For production use "standalone" in next.config.ts !!

# Очистить Docker кэш
docker system prune -a
docker builder prune -a

docker build .

docker build -t docker-next:dev -f Dockerfile.dev .  -  build from Dockerfile.dev

docker images  -  all images

docker image ls  -  all images

docker rmi [IMAGE ID] - delete image

docker image prune  - delete all unuseble images

docker run [IMAGE ID]  - container from image

docker ps - runned containers

docker ps -a - all containers

docker start [CONTAINER ID]

docker rm [CONTAINER ID]

docker container prune    -   dellete all unuseble containers

docker stop [CONTAINER ID]

"
FROM node

WORKDIR /app

COPY package.json /app

RUN npm install

ENV PORT 3000

EXPOSE $PORT

CMD [ "node", "app.js" ]

"

docker build .

docker build -t [IMAGE NAME] .

docker build -t [IMAGE NAME]:[TAG] .

docker run -d -p 80:3000 [IMAGE ID]

docker run -d -p 3000:3000 --name anyname [IMAGE ID]

docker stop anyname  -  stop containe anyname

docker run -d -p 3000:3000 --name anyname --rm [IMAGE ID]  - delete container after stop

docker run -d -p 3000:3000 --env-file .env --rm --name [IMAGE NAME]  -  get port from .env


#Volumes:
for DEV

docker run -d -p -v "/Users/aleks/Documents/docker-next:/app" -v /app/node_modules -v logs:app/data --rm --name [IMAGE NAME]:[TAG]  - where: logs:app/data logs=VOLUME NAME, app/data=VOLUME DIR

D:/WorkSpace/NextJS/docker-next

docker run -d -p 3000:3000 -v D:\WorkSpace\NextJS\docker-next:/app -v /app/node_modules -v /app/.next -v logs:/app/data -w /app -e NODE_ENV=development --rm --name docker-next-container docker-next:latest npm run dev

docker run -d -p 3000:3000 -v D:\WorkSpace\NextJS\docker-next:/app -v /app/node_modules -v /app/.next -v logs:/app/data -w /app -e NODE_ENV=development --rm --name docker-next-container docker-next:latest npm start

#dev:
docker run -d -p 3000:3000 -v D:\WorkSpace\NextJS\docker-next:/app -v /app/node_modules -v /app/.next -v logs:/app/data -w /app -e NODE_ENV=development -e CHOKIDAR_USEPOLLING=true --rm --name next-dev docker-next:dev

docker run -d -p 3000:3000 -v D:\WorkSpace\NextJS\docker-next:/app -v /app/.next -w /app -e NODE_ENV=development -e CHOKIDAR_USEPOLLING=true -e WATCHPACK_POLLING=true --rm --name next-dev docker-next:dev

docker run -d -p 3000:3000 -v D:\WorkSpace\NextJS\docker-next:/app -w /app -e NODE_ENV=development -e CHOKIDAR_USEPOLLING=true --rm --name next-dev docker-next:dev

docker run -it --rm -p 3000:3000 -v ${PWD}:/app -w /app -e NODE_ENV=development -e CHOKIDAR_USEPOLLING=true -e WATCHPACK_POLLING=true --name nextjs-hot node:20-alpine sh -c "npm ci && npm run dev -- -H 0.0.0.0"


#Push to dockerHub:

docker login

docker push aleksandrvakarin/[REPOSITORY NAME]:latest   -  where REPOSITORY NAME = aleksandrvakarin/[REPOSITORY NAME]


#Docker-compose:
for my compose.dev.yaml:
for reload browser use "Run all services" in compose.dev.yaml

docker network create my_network  -  first run network

docker-compose -f compose.dev.yaml down

docker-compose -f compose.dev.yaml up --build